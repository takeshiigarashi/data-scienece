<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js">
</script>
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({
 tex2jax: {
 inlineMath: [['$', '$'] ],
 displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
 }
 });
</script>

# 3.5 アソシエーション分析

機械学習というよりは従来型のデータマイニング手法。

- 条件Aのときに、事象Bが起こる可能性が大きい
- 事象Aが発生すると別の事象Bが一緒に発生しやすい

このようなルールを**アソシエーションルール**という。こういったルールを見つける手法。

## バスケット分析

ある商品と一緒に購入される可能性が高い商品はどれかを分析する手法。アソシエーション分析の１つだが、商品の購入のみを対象としていて、「ウェブサイト訪問」といった行動履歴など他の情報と一緒に分析する手法ではない。

## ABC分析

売上の占める割合でA、B、Cにランク付けする。典型的には70%、25%、5%でわける。

## アソシエーション分析で使われる指標

### 信頼度 (Confidence)

Aが発生した条件のもとでBも発生する割合（条件付き確率）

$$\frac{n(A \cap B)}{n(A)}$$

- 信頼度が大きい場合、同時に発生する可能性は大きい（Aを購入した顧客がBも購入する可能性が大きい）
- ただし、Aの購入者が全体に対して少ない（レアケース）場合や、Bが人気の高い商品であるときも信頼度が大きくなるため、注意が必要。

### 支持度 (Support)

AとBが同時に発生する割合

$$\frac{n(A \cap B)}{n(U)}$$

- 支持度は全体に対する割合になるため、この値が大きいということは全体に対して影響が大きい。
- 信頼度も支持度も両方とも高い場合は、どちらもすでに人気がある場合があるため注意が必要

計算例

ウェブニュースサイトに１日1000人が訪問した。

- A: スポーツのカテゴリを見た人が500人。そのうち旅行カテゴリも見た人が300人
- B: 旅行カテゴリを見た人が50人。そのうちグルメカテゴリも見た人が40人
- C: グルメカテゴリを見た人が200イン


| |信頼度|支持度|
|:--:|:----:|:----:|
|A|$300/500=0.6$|$300/1000=0.3$|
|B|$40/50=0.8$|$40/1000=0.04$|

Bの信頼度は高いが支持度が低い。この２つであれば、Aを重要視して、スポーツカテゴリを見た人に旅行カテゴリを推薦するのが効果的。

### リフト値 (Lift)

 事象Aが事象Bをどの程度引き上げる効果があるのか

$$\frac{\frac{n(A \cap B)}{n(A)}}{\frac{n(B)}{n(U)}}$$

全体に対するBの割合よりもAに占めるBの割合の方が大きい場合に値が大きくなる。つまり、AはBを引き上げる効果を持っている、と捉える。

### 確率による表現

信頼度(Confidence)、支持度(Support)、リフト値(Lift)は、確率を使えば以下のように書ける。

$$\begin{aligned}
\text{Confidence} &= \frac{P(A \cap B)}{P(A)} = P(B|A)\\
\text{Support} &= P(A \cap B)\\
\text{Lift} &= \frac{\text{Confidence}}{P(B)} = \frac{P(B|A)}{P(B)}
\end{aligned}$$
